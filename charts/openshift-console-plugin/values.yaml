---
plugin:
  name: ""
  description: ""
  image: "quay.io/jsalomon/mcp-tools-catalog:latest"
  imagePullPolicy: Always
  imagePullSecrets: []
  replicas: 2
  port: 9443
  securityContext:
    enabled: true
  podSecurityContext:
    enabled: true
    runAsNonRoot: true
    seccompProfile:
      type: RuntimeDefault
  containerSecurityContext:
    enabled: true
    allowPrivilegeEscalation: false
    capabilities:
      drop:
        - ALL
  resources:
    requests:
      cpu: 10m
      memory: 50Mi
    limits:
      cpu: 100m
      memory: 128Mi
  basePath: /
  certificateSecretName: ""
  
  # Configuration for Backstage Proxy
  # NOTE: OpenShift console plugin proxy requires HTTPS for Service endpoints.
  # Port 7443 expects a TLS-terminating sidecar in front of Backstage (port 7007).
  # See DEPLOYMENT.md "Configure TLS for Console Plugin Integration" section.
  backstage:
    enabled: true
    useRoute: false
    serviceName: backstage
    namespace: backstage
    port: 7443
    basePath: /
    # Option 3: UserToken forwards token to MCP Entity API, which includes the catalog-proxy endpoint
    # The catalog-proxy endpoint handles forwarding requests to Backstage catalog API with proper auth
    # IMPORTANT: UserToken ensures the console proxy forwards X-Forwarded-Access-Token header
    # which is required for both catalog-proxy (read) and MCP Entity API (write) endpoints
    authorization: UserToken  # Forward user's authentication token to backend (required for catalog-proxy and MCP Entity API)

  proxies: []

  # Advanced: generic proxy list (if you need more than just Backstage)
  proxies: []

  serviceAccount:
    create: true
    annotations: {}
    name: ""
  patcherServiceAccount:
    create: true
    annotations: {}
    name: ""
  jobs:
    patchConsoles:
      enabled: true
      image: "registry.redhat.io/openshift4/ose-tools-rhel9@sha256:ee65b244fc94d5765514c604dc0a288517dcdce68de65128d047622b6b30a618"
      podSecurityContext:
        enabled: true
        runAsNonRoot: true
        seccompProfile:
          type: RuntimeDefault
      containerSecurityContext:
        enabled: true
        allowPrivilegeEscalation: false
        capabilities:
          drop:
            - ALL
      resources:
        requests:
          cpu: 10m
          memory: 50Mi
